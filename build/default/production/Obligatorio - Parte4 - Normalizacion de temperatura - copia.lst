MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ; PIC16F887 Configuration Bit Settings
                      00002 ; Assembly source line config statements
                      00003 #include "p16f887.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Mar 17 2019
                      00005 ;  MPASM PIC16F887 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00810         LIST
                      00004     
                      00005 ; Bits de configuracion
                      00006 
                      00007 ; CONFIG1
                      00008 ; __config 0xE0C2
2007   20C2           00009  __CONFIG _CONFIG1, _FOSC_HS & _WDTE_OFF & _PWRTE_ON & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOREN_OFF & _I
                            ESO_OFF & _FCMEN_OFF & _LVP_OFF
                      00010 ; CONFIG2
                      00011 ; __config 0xFEFF
2008   3EFF           00012  __CONFIG _CONFIG2, _BOR4V_BOR21V & _WRT_OFF
                      00013 
                      00014 ; Organizacion de la memoria EEPROM.
                      00015 ; 0x30 -> Flag que indica si está¡ usado el buffer o no.
                      00016 ; 0x31 -> Puntero actual del buffer.
                      00017 ; 0x40 - 0x49 -> Buffer.
                      00018     
                      00019 ; Organizacion de la memoria de datos 
Warning[205]: Found directive in column 1. (cblock)
                      00020 cblock 0x20     ; Comienzo a escribir la memoria de datos en la direccion 0x20
                      00021 ; Definicion de variables
  00000020            00022     W_TEMP ; 0X20
  00000021            00023     STATUS_TEMP ; 0X21
  00000022            00024     CONTADOR_1 ; 0x22
  00000023            00025     CONTADOR_2 ; 0x23
  00000024            00026     CONTADOR_3 ;0x24
  00000025            00027     VALOR_CONVERSION_TEMP ; 0x25
  00000026            00028     VALOR_CONVERSION ; 0x26
  00000027            00029     VALOR_CONVERSIONH ; 0x27
  00000028            00030     VALOR_CONVERSIONL ; 0x28
  00000029            00031     VALOR_CONVERSION_MEMORIA ; 0x29
  0000002A            00032     CONTADOR_TIMER1 ; 0x2A
  0000002B            00033     SIGUIENTE_PUNTERO ; 0X2B
  0000002C            00034     PUNTERO_ACTUAL ; 0x2C
  0000002D            00035     TEMP_W ; 0x2D
  0000002E            00036     STATUS_TEMP_CASE ; 0x2E
  0000002F            00037     W_TEMP_CASE ; 0x2F
  00000030            00038     ITERADOR ; 0x30
  00000031            00039     DELAY_CONTADOR ; 0x31
  00000032            00040     DELAY_1MS_CONTADOR_1 ; 0x32
  00000033            00041     DELAY_1MS_CONTADOR_2 ; 0x33
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000034            00042     MULTIPLICANDO_REGLA ; 0x34
  00000035            00043     DIVISOR_REGLA ; 0x35
  00000036            00044     REGLAE ; 0x36
  00000037            00045     REGLAF ; 0x37
  00000038            00046     VALOR_CONVERSION_REGLA ; 0x38
  00000039            00047     MULTIPLICANDO ; 0x39
  0000003A            00048     PRODH ; 0x3A
  0000003B            00049     PRODL ; 0x3B
  0000003C            00050     COCIENTE ; 0x3C
  0000003D            00051     RESTO ; 0x3D
  0000003E            00052     MULT ; 0x3E
  0000003F            00053     DIVIDENDO ; 0x3F
  00000040            00054     ASCII1 ; 0x40
  00000041            00055     ASCII2 ; 0x41
  00000042            00056     ASCII3 ; 0x42
  00000043            00057     ASCII_TEMP ; 0x43
  00000044            00058     ASCII_CONVERSION ; 0x44
                      00059 
Warning[205]: Found directive in column 1. (ENDC)
                      00060 endc
                      00061    
                      00062 ;Organizacion de la memoria de programacion
Warning[205]: Found directive in column 1. (org)
                      00063 org 0x0000
Warning[203]: Found opcode in column 1. (goto)
0000   2???           00064 goto main
                      00065 
Warning[205]: Found directive in column 1. (org)
                      00066 org 0x0004
Warning[203]: Found opcode in column 1. (goto)
0004   2???           00067 goto interrupt
                      00068 
                      00069 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;; PROGRAMA PRINCIPAL ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00070         
0005                  00071 main
0005   2???           00072     call configuracion_inicial
                      00073     
0006                  00074 mainloop
0006   2???           00075     call realizar_conversion
0007   2???           00076     goto mainloop
                      00077         
                      00078 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;; RUTINA DE INTERRUPCION ;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00079 
0008                  00080 interrupt
0008   2???           00081     call guardar_contexto
                      00082 
0009   1283 1303      00083     banksel PIR1
000B   1E8C           00084     btfss PIR1, RCIF ; Interrupcion usart?
000C   2???           00085     goto $+3
000D   128C           00086     bcf PIR1, RCIF
000E   2???           00087     call interrupt_usart
                      00088     
000F   2???           00089     call cargar_contexto
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010   0009           00090     retfie ; interrupt
                      00091         
                      00092 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;; CONFIGURACION INICIAL ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00093 
0011                  00094 configuracion_inicial   
                      00095     ; Configuro las entradas de voltaje analogicas (PUERTOA).
0011   1683 1303      00096     banksel TRISA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0013   1405           00097     bsf TRISA, 0 ; Seteo RA0 como entrada (perilla analogica)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0014   1485           00098     bsf TRISA, 1 ; Seteo RA1 como entrada (perilla analógica)
0015   1683 1703      00099     banksel ANSEL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   1408           00100     bsf ANSEL, 0 ; Seto el puerto RA0 como analogico.
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0018   1488           00101     bsf ANSEL, 1 ; Seto el puerto RA1 como analogico.
                      00102 
                      00103     ; Configuracion de la conversión analógica.
0019   1283 1303      00104     banksel ADRESH
001B   019E           00105     clrf ADRESH
001C   1683 1303      00106     banksel ADRESL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001E   019E           00107     clrf ADRESL
001F   1683 1303      00108     banksel ADCON1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0021   019F           00109     clrf ADCON1 ; ADFM = Left justified | VCFG1 = Vss | VCFG0 = Vdd     
                      00110     ; Configuración del reloj y encendido del conversor analogico.
0022   1283 1303      00111     banksel ADCON0 
0024   3081           00112     movlw b'10000001'
0025   009F           00113     movwf ADCON0 ; ADCS = Fosc/32 (TAD: 1.6(x10^-6)s) | ADON = ADC is enabled.
                      00114 
                      00115     ; Configuro las interrupciones.
0026   178B           00116     bsf INTCON, GIE ; Global interrupt enable bit.
0027   170B           00117     bsf INTCON, PEIE ; Pheripheral interrupt enable bit.
                      00118         
                      00119     ; Configuracion puerto serie (EUSART)
                      00120     ; Configuracion baudrate
0028   1683 1303      00121     banksel TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002A   1518           00122     bsf TXSTA, BRGH ; BRGH = High Speed
002B   1683 1703      00123     banksel BAUDCTL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002D   1187           00124     bcf BAUDCTL, BRG16 ; BRG16 = 8-bit Baud Rate Generator is used.
002E   1683 1303      00125     banksel SPBRGH
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0030   019A           00126     clrf SPBRGH
0031   1683 1303      00127     banksel SPBRG
0033   3081           00128     movlw d'129'        
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0034   0099           00129     movwf SPBRG ; Baudrate 9600
                      00130     ; Configuro la transmision.
0035   1683 1303      00131     banksel TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0037   1698           00132     bsf TXSTA, TXEN  ; Transmit Enable bit = Transmit enabled
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0038   1218           00133     bcf TXSTA, SYNC  ; EUSART mode select bit = Asynchronous mode
                      00134     ; Configuro la recepcion.
0039   1283 1303      00135     banksel RCSTA
003B   1618           00136     bsf RCSTA, CREN  ; Continuous Recive Enable bit = Enables receiver
003C   1798           00137     bsf RCSTA, SPEN  ; Serial Port Enable bit = Serial port enabled.
003D   1683 1303      00138     banksel PIE1 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
003F   168C           00139     bsf PIE1, RCIE ; Configuro que se generen interrupciones con la recepción
                      00140 
0040   0008           00141     return ; configurar_puertos
                      00142 
                      00143 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;; RUTINAS PROGRAMA PRINCIPAL ;;;;;;;;;;;;;;;;;;;;;;
                      00144 
                      00145 ; Lee el contenido del puerto y dervia en un case que indica que letra se
                      00146 ; ingresó.
0041                  00147 interrupt_usart
0041   1283 1303      00148     banksel RCREG
0043   081A           00149     movf RCREG, w
0044   3A41           00150     xorlw b'01000001' ; 0x41 = 'A' (ASCII)
0045   1903           00151     btfsc STATUS, Z
0046   2???           00152     call rutina_letra_A
                      00153     
0047   3A20           00154     xorlw b'01100001' ^ b'01000001' ; 0x61 = 'a' (ASCII)
0048   1903           00155     btfsc STATUS, Z               
0049   2???           00156     call rutina_letra_a
                      00157     
004A   0008           00158     return ; interrupt_usart
                      00159         
                      00160 ; Rutina de letra A: Obtiene el valor actual de la conversion y la envía por
                      00161 ; el puerto usart.
004B                  00162 rutina_letra_A
004B   2???           00163     call guardar_contexto_case
                      00164 
004C   1283 1303      00165     banksel VALOR_CONVERSION
004E   0826           00166     movf VALOR_CONVERSION, w
004F   2???           00167     call enviar_conversion_usart_hexa
                      00168 
0050   2???           00169     call cargar_contexto_case
0051   0008           00170     return ; rutina_letra_A
                      00171         
                      00172 ; Obtiene el valor de la conversión en w, lo mapea y lo envía por el puerto
                      00173 ; usart.
0052                  00174 enviar_conversion_usart_hexa    
0052   1283 1303      00175     banksel VALOR_CONVERSION_TEMP
0054   00A5           00176     movwf VALOR_CONVERSION_TEMP
                      00177 
                      00178     ; Obtengo los valores High y Low de la conversion.
0055   39F0           00179     andlw b'11110000'
0056   1283 1303      00180     banksel VALOR_CONVERSIONH
0058   00A7           00181     movwf VALOR_CONVERSIONH
0059   0EA7           00182     swapf VALOR_CONVERSIONH, f  ; Hago swamp para cambiar de lugar y 
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00183                                 ; tener todos en los bits menos significativos.
                      00184     
005A   1283 1303      00185     banksel VALOR_CONVERSION_TEMP
005C   0825           00186     movf VALOR_CONVERSION_TEMP, w
005D   390F           00187     andlw b'00001111'
005E   1283 1303      00188     banksel VALOR_CONVERSIONL
0060   00A8           00189     movwf VALOR_CONVERSIONL
                      00190     
0061   1283 1303      00191     banksel VALOR_CONVERSIONH
0063   0827           00192     movf VALOR_CONVERSIONH, w
0064   2???           00193     call mapear_enviar_hexa
                      00194     
                      00195     ; Mapeo y envío los valores por el puerto usart.
0065   1283 1303      00196     banksel VALOR_CONVERSIONL
0067   0828           00197     movf VALOR_CONVERSIONL, w
0068   2???           00198     call mapear_enviar_hexa    
                      00199     
0069   0008           00200     return ; enviar_conversion_usart_hexa
                      00201         
                      00202 ; Mapea el valor de w a un caracter ASCII y lo envía por el puerto USART.
006A                  00203 mapear_enviar_hexa 
006A   2???           00204     call mapear_hexa
006B   2???           00205     call enviar_w
006C   0008           00206     return ; mapear_enviar_hexa
                      00207         
                      00208 ; Envia el valor del registro w por el puerto USART.
006D                  00209 enviar_w
006D   1283 1303      00210     banksel PIR1
006F   1E0C           00211     btfss PIR1, TXIF ; Esta vacío el bus de transmisión?
0070   2???           00212     goto $-1 ; No, vuelvo a chequear hasta que esté libre.
0071   1283 1303      00213     banksel TXREG
0073   0099           00214     movwf TXREG 
0074   0008           00215     return ; enviar_w
                      00216         
                      00217 ; Mapea el valor de w a un caracter ASCII y lo guarda en w.
0075                  00218 mapear_hexa
0075   1283 1303      00219     banksel TEMP_W
0077   00AD           00220     movwf TEMP_W
0078   3C09           00221     sublw b'00001001' ; 0x09 -> 9 decimal
                      00222     ; INICIO IF
0079   1C03           00223         btfss STATUS, C
                      00224         ; THEN (w > 9)
007A   2???           00225         goto sumar_37 ; Es mayor a 9, entonces sumo 0x37 = 0011 0111
                      00226         ; ELSE (w <= 9)
007B   2???           00227         goto sumar_30 ; Es menor o igual 9, entonces sumo 0x30 = 0011 0000
                      00228     ; FIN IF
                      00229 
                      00230 ; Sumo 30h al valor que tengo en w.
007C                  00231 sumar_30
007C   1283 1303      00232     banksel TEMP_W
007E   082D           00233     movf TEMP_W, w
007F   3E30           00234     addlw b'00110000' ; 0x30 -> 48 decimal
0080   0008           00235     return ; mapear_hexa
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00236 
                      00237 ; Sumo 37h al valor que tengo en w.
0081                  00238 sumar_37
0081   1283 1303      00239     banksel TEMP_W
0083   082D           00240     movf TEMP_W, w
0084   3E37           00241     addlw b'00110111' ; 0x37 -> 55 decimal
0085   0008           00242     return ; mapear_hexa
                      00243 
                      00244 ; Manda la conversion en formato decimal.
0086                  00245 rutina_letra_a
0086   2???           00246     call guardar_contexto_case
                      00247     
0087   1283 1303      00248     banksel VALOR_CONVERSION
0089   0826           00249     movf VALOR_CONVERSION, w
008A   1283 1303      00250     banksel VALOR_CONVERSION_TEMP
008C   00A5           00251     movwf VALOR_CONVERSION_TEMP
                      00252     
008D   1283 1303      00253     banksel MULTIPLICANDO_REGLA
008F   3064           00254     movlw d'100'
0090   00B4           00255     movwf MULTIPLICANDO_REGLA
                      00256     
0091   1283 1303      00257     banksel DIVISOR_REGLA
0093   30FF           00258     movlw d'255'
0094   00B5           00259     movwf DIVISOR_REGLA
                      00260  
0095   1283 1303      00261     banksel VALOR_CONVERSION_TEMP
0097   0825           00262     movf VALOR_CONVERSION_TEMP, w
                      00263     
0098   2???           00264     call regla_de_tres
                      00265     
0099   1283 1303      00266     banksel REGLAE
009B   0836           00267     movf REGLAE, w
009C   2???           00268     call mapear_enviar_dec
                      00269     
                      00270      ; Envío grados centrígrados.
009D   30BA           00271     movlw d'186' ; °
009E   2???           00272     call enviar_w
009F   3043           00273     movlw d'67' ; C
00A0   2???           00274     call enviar_w    
                      00275    
00A1   2???           00276     call cargar_contexto_case
                      00277     
00A2   0008           00278     return ; rutina_letra_a
                      00279         
                      00280 
                      00281 
                      00282 ; Realiza una regla de tres.
                      00283 ; w = w*MULTIPLICANDO_REGLA/DIVISOR_REGLA
00A3                  00284 regla_de_tres
00A3   1283 1303      00285     banksel VALOR_CONVERSION_REGLA
00A5   00B8           00286     movwf VALOR_CONVERSION_REGLA
00A6   0834           00287     movf MULTIPLICANDO_REGLA, w
00A7   00B9           00288     movwf MULTIPLICANDO
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00A8   0838           00289     movf VALOR_CONVERSION_REGLA, w
00A9   2???           00290     call multiplicar
                      00291     
                      00292     ; Si la multiplicación dio 0, devuelvo 0.
00AA   1283 1303      00293     banksel PRODH
00AC   08BA           00294     movf PRODH, f
                      00295     ; INICIO IF
00AD   1D03           00296         btfss STATUS, Z
                      00297         ; THEN (PRODH <> 0)
00AE   2???           00298         goto $+7
                      00299         ; ELSE (PRODH = 0)
00AF   1283 1303      00300         banksel PRODL
00B1   08BB           00301         movf PRODL, f
                      00302         ; INICIO IF
00B2   1D03           00303             btfss STATUS, Z
                      00304             ; THEN (PRODL <> 0)
00B3   2???           00305             goto $+2
                      00306             ; ELSE (PRODL = 0)
00B4   3400           00307             retlw 0 ; Si es 0 el producto, devuelvo 0 porque no puedo dividir.
                      00308         ; FIN IF
                      00309     ; FIN IF
                      00310     
                      00311     ; LOS PARAMETROS DE dividir YA ESTAN CARGADOS, CARGO SOLO w.
00B5   1283 1303      00312     banksel DIVISOR_REGLA
00B7   0835           00313     movf DIVISOR_REGLA, w
00B8   2???           00314     call dividir
                      00315     
00B9   1283 1303      00316     banksel COCIENTE
00BB   083C           00317     movf COCIENTE, w
00BC   00B6           00318     movwf REGLAE
00BD   083D           00319     movf RESTO, w
00BE   00B7           00320     movwf REGLAF    
                      00321     
00BF   0008           00322     return ; regla_de_tres
                      00323 
                      00324 ; Multiplica dos numeros.
                      00325 ; MULTIPLICANDO * w = PRODH:PRODL
00C0                  00326 multiplicar
00C0   1283 1303      00327     banksel MULT
00C2   00BE           00328     movwf MULT
                      00329     
                      00330     ; Limpio los resultados.
00C3   1283 1303      00331     banksel PRODL
00C5   01BB           00332     clrf PRODL
00C6   01BA           00333     clrf PRODH
                      00334     
00C7   1283 1303      00335     banksel MULTIPLICANDO
00C9   08B9           00336     movf MULTIPLICANDO, f
                      00337     ; INICIO IF
00CA   1903           00338         btfsc STATUS, Z
                      00339         ; THEN (MULTIPLICANDO = 0)
00CB   0008           00340         return
                      00341         ; ELSE (MULTIPLICANDO <> 0)
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (multiplicar_loop)
00CC                  00342         multiplicar_loop
00CC   1283 1303      00343             banksel MULT
00CE   083E           00344             movf MULT, w
00CF   1283 1303      00345             banksel PRODL
00D1   07BB           00346             addwf PRODL, f
00D2   1803           00347             btfsc STATUS, C
00D3   0ABA           00348             incf PRODH, f
00D4   0BB9           00349             decfsz MULTIPLICANDO, f
00D5   2???           00350             goto multiplicar_loop           
                      00351     ; FIN IF
00D6   0008           00352     return ; multiplicar
                      00353 
                      00354 ; Divide dos numeros.
                      00355 ; PRODH:PRODL/w = w*COCIENTE + RESTO
00D7                  00356 dividir
00D7   1283 1303      00357     banksel COCIENTE
00D9   01BC           00358     clrf COCIENTE
00DA   01BD           00359     clrf RESTO
00DB   00BF           00360     movwf DIVIDENDO
                      00361     
Warning[207]: Found label after column 1. (loop_dividir)
00DC                  00362     loop_dividir
00DC   1283 1303      00363         banksel PRODH
00DE   08BA           00364         movf PRODH, f
                      00365         ; INICIO IF
00DF   1D03           00366             btfss STATUS, Z
                      00367             ; THEN (PRODH <> 0)
00E0   2???           00368             goto restar_dividir
                      00369             ; ELSE (PRODH = 0)
00E1   083F           00370             movf DIVIDENDO, w
00E2   023B           00371             subwf PRODL, w
                      00372             ; INICIO IF
00E3   1803           00373                 btfsc STATUS, C
                      00374                 ; THEN (PRODL >= DIVIDENDO)
00E4   2???           00375                 goto restar_dividir
                      00376                 ; ELSE (PRODL < DIVIDENDO)
00E5   083B           00377                 movf PRODL, w
00E6   00BD           00378                 movwf RESTO
00E7   0008           00379                 return ; dividir
                      00380             ; FIN IF
                      00381         ; FIN IF
                      00382         
Warning[207]: Found label after column 1. (restar_dividir)
00E8                  00383         restar_dividir
00E8   1283 1303      00384             banksel COCIENTE
00EA   0ABC           00385             incf COCIENTE, f
                      00386             
00EB   083F           00387             movf DIVIDENDO, w
00EC   02BB           00388             subwf PRODL, f
                      00389             ; INICIO IF
00ED   1803           00390                 btfsc STATUS, C
                      00391                 ; THEN (PRODL < DIVIDENDO)
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00EE   2???           00392                 goto $+2
                      00393                 ; ELSE (PRODL >= DIVIDENDO)
00EF   03BA           00394                 decf PRODH, f
00F0   2???           00395             goto loop_dividir
                      00396 
                      00397 ; Mapea y envía un valor decimal por el puerto usart.
00F1                  00398 mapear_enviar_dec
00F1   2???           00399     call convertir_dec_ascii
                      00400     
00F2   1283 1303      00401     banksel ASCII1
00F4   0840           00402     movf ASCII1, w
00F5   2???           00403     call enviar_w
                      00404     
00F6   1283 1303      00405     banksel ASCII2
00F8   0841           00406     movf ASCII2, w
00F9   2???           00407     call enviar_w
                      00408     
00FA   1283 1303      00409     banksel ASCII3
00FC   0842           00410     movf ASCII3, w
00FD   2???           00411     call enviar_w   
                      00412     
00FE   0008           00413     return ; mapear_enviar_dec
                      00414 
                      00415 ; Convierte el valor numerico de w en ASCII.
                      00416 ; w = ASCII3 ASCII2 ASCII1
00FF                  00417 convertir_dec_ascii    
00FF   2???           00418     call convertir_valor_dec
0100   1283 1303      00419     banksel ASCII_TEMP
0102   00C3           00420     movwf ASCII_TEMP
0103   0844           00421     movf ASCII_CONVERSION, w
0104   00C2           00422     movwf ASCII3 ; Almaceno el resultado
                      00423     
0105   0843           00424     movf ASCII_TEMP, w
0106   2???           00425     call convertir_valor_dec
0107   1283 1303      00426     banksel ASCII_TEMP
0109   00C3           00427     movwf ASCII_TEMP
010A   0844           00428     movf ASCII_CONVERSION, w
010B   00C1           00429     movwf ASCII2 ; Almaceno el resultado
                      00430     
010C   0843           00431     movf ASCII_TEMP, w
010D   2???           00432     call convertir_valor_dec
010E   1283 1303      00433     banksel ASCII_TEMP
0110   00C3           00434     movwf ASCII_TEMP
0111   0844           00435     movf ASCII_CONVERSION, w
0112   00C0           00436     movwf ASCII1 ; Almaceno el resultado
                      00437     
0113   0008           00438     return ; convertir_dec_ascii
                      00439    
                      00440 ; Convierte solo una parte del valor en w.
                      00441 ; ASCII_CONVERSION = w MOD DIVISOR
                      00442 ; w = w/DIVISOR
0114                  00443 convertir_valor_dec
0114   1283 1303      00444     banksel PRODL
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0116   00BB           00445     movwf PRODL
0117   300A           00446     movlw d'10'
0118   2???           00447     call dividir
                      00448     
0119   1283 1303      00449     banksel RESTO
011B   083D           00450     movf RESTO, w    
011C   3E30           00451     addlw b'00110000' ; Sumo 30.
011D   00C4           00452     movwf ASCII_CONVERSION ; Almaceno el resultado
                      00453     
011E   1283 1303      00454     banksel COCIENTE
0120   083C           00455     movf COCIENTE, w
                      00456     
0121   0008           00457     return ; convertir_valor_dec
                      00458     
                      00459 ; Realiza la conversion y almacena los valores en variables.
0122                  00460 realizar_conversion
0122   149F           00461     bsf ADCON0, GO ; Start conversion
0123   189F           00462     btfsc ADCON0, GO ; Is conversion done?
0124   2???           00463     goto $-1 ; No, test again
                      00464         
                      00465     ; Obtener el valor de la conversión.
0125   1283 1303      00466     banksel ADRESH
0127   081E           00467     movf ADRESH, w
0128   1283 1303      00468     banksel VALOR_CONVERSION
012A   00A6           00469     movwf VALOR_CONVERSION
                      00470         
012B   0008           00471     return ; realizar_conversion
                      00472 
                      00473 ; Rutinas de contexto.
012C                  00474 guardar_contexto
012C   1283 1303      00475     banksel W_TEMP
012E   00A0           00476     movwf W_TEMP  ; Guardo w.
012F   0E03           00477     swapf STATUS, w ; Swap status en w.
0130   00A1           00478     movwf STATUS_TEMP ; Guardo STATUS.
0131   0008           00479     return ; guardar_contexto
                      00480         
0132                  00481 guardar_contexto_case
0132   1283 1303      00482     banksel W_TEMP_CASE
0134   00AF           00483     movwf W_TEMP_CASE  ; Guardo w.
0135   0E03           00484     swapf STATUS, w ; Swap status en w.
0136   00AE           00485     movwf STATUS_TEMP_CASE ; Guardo STATUS.
                      00486 
0137   0008           00487     return ; guardar_contexto_case
                      00488     
0138                  00489 cargar_contexto
0138   1283 1303      00490     banksel STATUS_TEMP
013A   0E21           00491     swapf STATUS_TEMP, w
013B   0083           00492     movwf STATUS
013C   0EA0           00493     swapf W_TEMP, f
013D   0E20           00494     swapf W_TEMP, w
013E   0008           00495     return ; cargar_contexto
                      00496         
013F                  00497 cargar_contexto_case
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

013F   1283 1303      00498     banksel STATUS_TEMP_CASE
0141   0E2E           00499     swapf STATUS_TEMP_CASE, w
0142   0083           00500     movwf STATUS
0143   0EAF           00501     swapf W_TEMP_CASE, f
0144   0E2F           00502     swapf W_TEMP_CASE, w
                      00503 
0145   0008           00504     return ; cargar_contexto_case
                      00505 
Warning[205]: Found directive in column 1. (end)
20C2 3EFF             00506 end
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 12


SYMBOL TABLE
  LABEL                             VALUE 

ABDEN                             00000000
ABDOVF                            00000007
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS10                             00000002
ANS11                             00000003
ANS12                             00000004
ANS13                             00000005
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANS8                              00000000
ANS9                              00000001
ANSEL                             00000188
ANSELH                            00000189
ASCII1                            00000040
ASCII2                            00000041
ASCII3                            00000042
ASCII_CONVERSION                  00000044
ASCII_TEMP                        00000043
BAUDCTL                           00000187
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRG0                              00000000
BRG1                              00000001
BRG10                             00000002
BRG11                             00000003
BRG12                             00000004
BRG13                             00000005
BRG14                             00000006
BRG15                             00000007
BRG16                             00000003
BRG2                              00000002
BRG3                              00000003
BRG4                              00000004
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 13


SYMBOL TABLE
  LABEL                             VALUE 

BRG5                              00000005
BRG6                              00000006
BRG7                              00000007
BRG8                              00000000
BRG9                              00000001
BRGH                              00000002
C                                 00000000
C1CH0                             00000000
C1CH1                             00000001
C1IE                              00000005
C1IF                              00000005
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1POL                             00000004
C1R                               00000002
C1RSEL                            00000005
C1SEN                             00000005
C2CH0                             00000000
C2CH1                             00000001
C2IE                              00000006
C2IF                              00000006
C2OE                              00000005
C2ON                              00000007
C2OUT                             00000006
C2POL                             00000004
C2R                               00000002
C2REN                             00000004
C2RSEL                            00000004
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

CCPR2L                            0000001B
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CKE                               00000006
CKP                               00000004
CM1CON0                           00000107
CM2CON0                           00000108
CM2CON1                           00000109
COCIENTE                          0000003C
CONTADOR_1                        00000022
CONTADOR_2                        00000023
CONTADOR_3                        00000024
CONTADOR_TIMER1                   0000002A
CREN                              00000004
CSRC                              00000007
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DELAY_1MS_CONTADOR_1              00000032
DELAY_1MS_CONTADOR_2              00000033
DELAY_CONTADOR                    00000031
DIVIDENDO                         0000003F
DIVISOR_REGLA                     00000035
D_A                               00000005
D_NOT_A                           00000005
ECCPAS                            0000009C
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDAT                             0000010C
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
FVREN                             00000000
GCEN                              00000007
GIE                               00000007
GO                                00000001
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

GO_DONE                           00000001
GO_NOT_DONE                       00000001
HTS                               00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOCB                              00000096
IOCB0                             00000000
IOCB1                             00000001
IOCB2                             00000002
IOCB3                             00000003
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
ITERADOR                          00000030
LTS                               00000001
MC1OUT                            00000007
MC2OUT                            00000006
MSK                               00000093
MSK0                              00000000
MSK1                              00000001
MSK2                              00000002
MSK3                              00000003
MSK4                              00000004
MSK5                              00000005
MSK6                              00000006
MSK7                              00000007
MULT                              0000003E
MULTIPLICANDO                     00000039
MULTIPLICANDO_REGLA               00000034
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
P1M0                              00000006
P1M1                              00000007
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRODH                             0000003A
PRODL                             0000003B
PRSEN                             00000007
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PSTRCON                           0000009D
PULSR                             00000002
PULSS                             00000003
PUNTERO_ACTUAL                    0000002C
PWM1CON                           0000009B
R                                 00000002
RA0                               00000000
RA1                               00000001
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
REGLAE                            00000036
REGLAF                            00000037
RESTO                             0000003D
RP0                               00000005
RP1                               00000006
RSEN                              00000001
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SBOREN                            00000004
SCKP                              00000004
SCS                               00000000
SEN                               00000000
SENDB                             00000003
SIGUIENTE_PUNTERO                 0000002B
SMP                               00000007
SPBRG                             00000099
SPBRGH                            0000009A
SPEN                              00000007
SR0                               00000006
SR1                               00000007
SRCON                             00000185
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPMSK                            00000093
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_TEMP                       00000021
STATUS_TEMP_CASE                  0000002E
STRA                              00000000
STRB                              00000001
STRC                              00000002
STRD                              00000003
STRSYNC                           00000004
SWDTEN                            00000000
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1GINV                            00000007
T1GIV                             00000007
T1GSS                             00000001
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TEMP_W                            0000002D
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
ULPWUE                            00000005
ULPWUIE                           00000002
ULPWUIF                           00000002
VALOR_CONVERSION                  00000026
VALOR_CONVERSIONH                 00000027
VALOR_CONVERSIONL                 00000028
VALOR_CONVERSION_MEMORIA          00000029
VALOR_CONVERSION_REGLA            00000038
VALOR_CONVERSION_TEMP             00000025
VCFG0                             00000004
VCFG1                             00000005
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000097
VREN                              00000007
VROE                              00000006
VRR                               00000005
VRSS                              00000004
W                                 00000000
WCOL                              00000007
WDTCON                            00000105
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WUE                               00000001
W_TEMP                            00000020
W_TEMP_CASE                       0000002F
Z                                 00000002
_.org_1_000C                      0000000C
_.org_1_0070                      00000070
_.org_1_00AE                      000000AE
_.org_1_00B3                      000000B3
_.org_1_00EE                      000000EE
_.org_1_0124                      00000124
_BOR21V                           00003EFF
_BOR40V                           00003FFF
_BOR4V_BOR21V                     00003EFF
_BOR4V_BOR40V                     00003FFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_BOR_NSLEEP                       00003EFF
_BOR_OFF                          00003CFF
_BOR_ON                           00003FFF
_BOR_SBODEN                       00003DFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00001FFF
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRC_CLKOUT                00003FFF
_FOSC_EXTRC_NOCLKOUT              00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTRC_CLKOUT                00003FFD
_FOSC_INTRC_NOCLKOUT              00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_LVP_OFF                          00002FFF
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FF9
__16F887                          00000001
cargar_contexto                   00000138
cargar_contexto_case              0000013F
configuracion_inicial             00000011
convertir_dec_ascii               000000FF
convertir_valor_dec               00000114
dividir                           000000D7
enviar_conversion_usart_hexa      00000052
enviar_w                          0000006D
guardar_contexto                  0000012C
guardar_contexto_case             00000132
interrupt                         00000008
interrupt_usart                   00000041
loop_dividir                      000000DC
main                              00000005
mainloop                          00000006
mapear_enviar_dec                 000000F1
MPASM 5.84  OBLIGATORIO - PARTE4 - NORMALIZA   11-22-2019  14:32:42         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

mapear_enviar_hexa                0000006A
mapear_hexa                       00000075
multiplicar                       000000C0
multiplicar_loop                  000000CC
realizar_conversion               00000122
regla_de_tres                     000000A3
restar_dividir                    000000E8
rutina_letra_A                    0000004B
rutina_letra_a                    00000086
sumar_30                          0000007C
sumar_37                          00000081

Errors   :     0
Warnings :    10 reported,     0 suppressed
Messages :    13 reported,     0 suppressed

